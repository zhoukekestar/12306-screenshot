
# 12306 适老化截图提取与重绘工具调研与计划

## 1. 项目背景与目标
*   **目标人群**：老年人及视力较弱的出行人群。
*   **核心痛点**：12306 官方订单截图信息过于密集、字号小、对比度低，且包含大量无关干扰信息（广告、温馨提示等），导致老人找“车次、座位号、检票时间”非常困难。
*   **解决方案**：通过纯前端网页，允许用户上传 12306 截图，离线识别文字，提取核心六要素（日期、时间、始发站、终点站、车次、姓名、座位号），并重新排版生成一张“超大字号、高对比度、无干扰”的极简乘车卡片图片。

## 2. 技术栈确立 (纯前端无后端方案)
*   **基础框架**：Vite + React 18 + TypeScript (提供极速的开发体验和良好的类型提示)
*   **样式方案**：Tailwind CSS (用于快速构建高对比度、大字号的适老化 UI 组件)
*   **OCR 识别库**：`tesseract.js` (WebAssembly 驱动的纯前端离线 OCR，使用 `chi_sim` 简体中文语言包)
*   **图片生成库**：`html-to-image` 或 `html2canvas` (负责将 React 渲染的重排版卡片 DOM 节点转化为可下载的 PNG/JPEG 图片)
*   **图标组件**：`lucide-react` (提供清晰的视觉指示符，如火车、时钟图标)

## 3. 核心业务流程规划
1.  **图片导入**：提供一个巨大的点击/拖拽上传区域，支持相册选图。
2.  **本地 OCR 解析**：
    *   调用 `tesseract.js` 并在界面显示进度条（首次加载 `chi_sim` 语言包约需要数 MB 流量，后续可被浏览器缓存）。
    *   获取原始识别文本。
3.  **正则提取与模糊匹配 (难点突破)**：
    *   车次：`/[GDCKZT]\d{1,4}/i` (匹配高铁、动车、特快等)
    *   时间：`/\d{2}:\d{2}/` (匹配出发时间)
    *   日期：`/\d{1,2}月\d{1,2}日/`
    *   座位：`/\d+车厢?\s*\d+[A-F]号?/i` 或 `/\d+车\s*\d+[A-F]/i`
    *   车站：使用关键字前后截取或常见中国城市火车站名字典进行比对。
4.  **核对与修正 UI**：
    *   由于 Tesseract 对 12306 复杂截图的识别可能存在小错漏（例如把“0”识别成“O”），将提取到的信息展示在一个**可编辑的表单**中，让用户（如帮老人操作的子女）核对并快速修正。
5.  **适老化图片生成与下载**：
    *   采用白底黑字。
    *   信息层级：顶部（超大出发时间） -> 中部（出发站、车次、到达站） -> 底部（车厢与座位号，姓名）。
    *   用户点击“保存图片”，调用 `html-to-image` 生成最终结果。

## 4. 适老化 UI/UX 设计规范
*   **字号 (Typography)**：关键数字（时间、车厢号）使用不小于 `36px` 的加粗无衬线字体；站名不小于 `28px`。
*   **对比度 (Contrast)**：拒绝浅灰、浅蓝等低对比度文字，符合 WCAG AAA 级对比度标准。
*   **交互 (Interaction)**：按钮尺寸（Touch Target）高度需大于 `56px`，操作链路极短（上传 -> 等待/确认 -> 保存）。
å